<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Music Station </title>
		<!-- Description, Keywords and Author -->
		<meta name="description" content="Music Station USAC">
		<meta name="keywords" content="Proyecto 2">
		<meta name="author" content="IPC 1">
		<!-- Ajuste de la pantalla -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- Styles -->
		<!-- Bootstrap CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">	
		<!-- Animate CSS -->
		<link href="css/animate.min.css" rel="stylesheet">
		<!-- Basic stylesheet -->
		<link rel="stylesheet" href="css/owl.carousel.css">
		<!-- Font awesome CSS -->
		<link href="css/font-awesome.min.css" rel="stylesheet">		
		<!-- Custom CSS -->
		<link href="css/style.css" rel="stylesheet">
		<link href="css/style-color.css" rel="stylesheet">
		<!-- Favicon -->
		<link rel="shortcut icon" href="img/logo/favicon.ico">	
	</head>
	
	<body onload="cargarDatos(), cargarCanciones(), cargarSolicitudes()" id="main">
		
		<!-- wrapper -->
		<div class="wrapper" id="home">
			<!-- header area -->
			<header>
				<!-- secondary menu -->
				<nav class="secondary-menu">
					<div class="container">
						<!-- secondary menu left link area -->
						<div class="sm-left">
							<strong>Estudiante</strong>:&nbsp; <a href="#nombreEstudiante">Jos&eacute; Pajoc</a>&nbsp;&nbsp;&nbsp;&nbsp;
							<strong>Curso</strong>:&nbsp; <a href="#curso">Instroducci&oacute;n a la programaci&oacute;n y computaci&oacute;n 1</a>
						</div>
						<div class="clearfix"></div>
					</div>
				</nav>
				<!-- primary menu -->
				<nav class="navbar navbar-fixed-top navbar-default">
					<div class="container">
						<!-- Brand and toggle get grouped for better mobile display -->
						<div class="navbar-header">
							<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<!-- logo area -->
							<a class="navbar-brand" href="#home">
								<!-- logo image -->
								<img class="img-responsive" src="img/logo/logo.png" alt="USAC" />
							</a>
						</div>

						<!-- Menú principal utilizando una lista en posición horizontal -->
						<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
							<ul class="nav navbar-nav navbar-right">
								<li><a href="#playList">Lista de canciones</a></li>
								<li><a href="#verUsuarios">Ver usuarios</a></li>
								<li><a href="#cargarCancionesCSV">Cargar canciones</a></li>
								<li><a href="#events">Solicitudes</a></li>		
								<li><a href="#reportesPDF">Generar reporte PDF</a></li>
								<li><a href="#nuevoUsuario">Nuevo usuario</a></li>
								<li><a href="../index.html">Salir</a></li>
							</ul>
						</div><!-- /.navbar-collapse -->
					</div><!-- /.container-fluid -->
				</nav>
			</header>
			<!--/ header end -->			
							
			<!-- portada -->
			<div class="banner">
				<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
					<!-- Wrapper for slides -->
					<div class="carousel-inner" role="listbox">
						<div class="item active">
							<img src="img/banner/b1.jpg" alt="...">
							<div class="container">
								<!-- banner caption -->
								<div class="carousel-caption slide-one">
									<!-- heading -->
									<h2 class="animated fadeInLeftBig"><i class="fa fa-music"></i>Bienvenido, <script>document.write(sessionStorage.getItem('usuario'));</script></h2>
									<!-- paragraph -->
									<h3 class="animated fadeInRightBig">El lugar perfecto para toda tu m&uacute;sica</h3>
								</div>
							</div>
						</div>
						<div class="item">
							<img src="img/banner/b2.jpg" alt="...">
							<div class="container">
								<!-- banner caption -->
								<div class="carousel-caption slide-two">
									<!-- heading -->
									<h2 class="animated fadeInLeftBig"><i class="fa fa-headphones"></i> Music Station - USAC</h2>
									<!-- paragraph -->
									<h3 class="animated fadeInRightBig">Personaliza tu lista de reproducci&oacute;n</h3>
								</div>
							</div>
						</div>
					</div>
					
					<!-- Control navegación banner -->
					<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
						<span class="fa fa-arrow-left" aria-hidden="true"></span>
					</a>
					<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
						<span class="fa fa-arrow-right" aria-hidden="true"></span>
					</a>
				</div>
			</div>
			<!--/ portada end -->
			
			<!-- portada navigation menu -->
			<div class="nav-animate"></div>
			
			<!-- lista canciones -->
			<div id="playList" class="hero pad">
				<div class="container">
					<!-- hero content -->
					<div class="hero-content ">
						<!-- heading -->
						<h2>Canciones registradas</h2>
						<hr>
						<!-- paragraph -->
						<p>Actualmente las <strong>canciones</strong> son:</p>
					</div>
					<!-- hero play list -->
					<div class="hero-playlist">
							<div class="col-md-10 col-sm-6">
								<!-- play list -->
								<div class="playlist-content">
									<ul class="list-unstyled"  id="listaCanciones">
									    <!-- área para cargar las canciones registradas -->
										
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--/ lista canciones end -->
			
			<!-- lista usuarios -->
			<div id="verUsuarios" class="promo parallax-one pad">
				<div class="container">
					<!-- promo element -->
					<div class="promo-element ">
						<!-- heading -->
						<h3>Usuarios</h3>
						<!-- paragraph -->
						<p>Los <strong>usuarios</strong> registrados son:</p>
						<!-- tabla para ver usuarios  -->
						<font color="#ffffff">
							<table class="table">
								<thead>
									<tr>
										<th scope="col">Nombre</th>
										<th scope="col">Apellido</th>
										<th scope="col">Nombre de usuario</th>
										<th scope="col">Tipo de cuenta</th>
										<th scope="col">Acciones</th>
									</tr>
								</thead>
								<!-- tbody para los usuarios -->
								<tbody id="listadoUsuarios">
								
								</tbody>
							</table>
						</font>
					</div>
				</div>
			</div>
			<!-- lista usuarios end -->
			
			<script>
				function cargarDatos(){									//Ver usuarios registrados en el sistema
					var tablaUsu = document.querySelector('#listadoUsuarios')  //seleccionar el id para cuerpo de la tabla usuarios
					fetch('http://localhost:3000/usuariosRegistrados')
					.then(response => response.json())
					.catch(error => {
						console.log(error)
					})
					.then(res => {
						for (var i in res) {
							tablaUsu.innerHTML += 
							`<tr>
								<th>  ${res[i].nombre} </th>
								<th>  ${res[i].apellido} </th>
								<th>  ${res[i].usuario} </th>
								<th>  ${res[i].tipo} </th>
								<th> <button type="button" value="${res[i].usuario}" onclick="editarUsuario(this)" class="btn btn-primary">Administrar</button> </th>
							</tr>`
						}
					})
				}
				
				function cargarCanciones(){
						var listaCanciones = document.querySelector('#listaCanciones') 
						fetch('http://localhost:3000/canciones')	
						.then(response => response.json())
						.catch(error =>{ 
							console.log("No se cargo las canciones")
						})
						.then(res => {
							listaCanciones.innerHTML = " "            <!-- limpiando la tabla para no tener duplicidad-->
							for(var j in res){
									listaCanciones.innerHTML +=
									 ` <li class="playlist-number">
											<!-- song information -->
											<div class="song-info" > <!-- canción agregada desde el servidor -->
												<h2>${res[j].nombre}</h2> 
												<img src="${res[j].imagen}" class="img-thumbnail" height="10%" width="10%"> 	   
												<p>
													<strong>Artista: </strong>${res[j].artista}    				&nbsp;   |&nbsp; 
													<strong>          Album: </strong>${res[j].album}   				&nbsp;  |&nbsp; 
													<strong>          Fecha: </strong>${res[j].fecha}     				&nbsp;  |&nbsp;
													<button type="button" value="${res[j].id}" onclick="editarCancion(this)" class="btn btn-primary">Administrar</button>
													<button type="button" value="${res[j].id}" onclick="verComentarios(this)" class="btn btn-success">Ver comentarios</button>
												</p>
												<p>
													<iframe width="410" height="200" src="${res[j].linkYoutube}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
													<iframe src="${res[j].linkSpotify}" width="300" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
												</p>
											</div>
											<div class="clearfix"></div>
										</li>  `
							}	
						})	
				}
				
				function editarUsuario(boton){                           <!-- función para editar los datos de un usuario-->
					var usuario = boton.value
					sessionStorage.setItem("buscarUsuario", usuario)		<!-- guardando en session storage el nombre de usuario para buscar -->
					location.href="../editarPerfil/editarPerfil.html"
				}
				
				function editarCancion(boton){ 						<!-- función para editar los datos de un usuario-->
					var idCancion = boton.value
					sessionStorage.setItem("buscarCancion", idCancion)     <!-- guardando en session storage el nombre de usuario para buscar -->
					location.href="../editarCancion/editarCancion.html"
				}
				
				function verComentarios(boton){ 						<!-- función para editar los datos de un usuario-->
					var idCancion = boton.value
					sessionStorage.setItem("buscarCancion", idCancion)     <!-- guardando en session storage el nombre de usuario para buscar -->
					location.href="../verComentarios/verComentarios.html"
				}				
			</script>
			
			<!-- cargar archivo CSV -->
			<div class="work-with-us pad" id="cargarCancionesCSV">
				<div class="container">
					<!-- default heading -->
					<div class="default-heading">
						<!-- heading -->
						<h2>Cargar canciones desde un archivo CSV</h2>
					</div>
					<!-- why work with us content -->
					<div class="why-content">
						<!-- paragraph -->
						<p class="why-message">Dar clic en el botón <strong>"Seleccionar archivo"</strong> y luego buscar el documento que desea cargar, despu&eacute;s
						dar clic al bot&oacute;n <strong>"Subir archivo"</strong>, el delimitador debe ser <strong>";" .</strong></p>
						<div class="row">
							<div class="col-md-12 col-sm-6">
									<!-- botón para buscar archivo -->
									<input type="file" id="files"  accept=".csv" />
									<!--botón cargar-->
									<center><button type="button"  onclick="cargarCSV()" class="btn btn-primary">Subir archivo</button></center>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--/ end cargar archivo CSV -->
								
			<script>  //función para cargar los archivo CSV
					function cargarCSV(){
						$('#files').parse({     //ID del elemento que contiene el csv
							config: {
								delimiter: ";",		//Delimitador punto y coma ;
								complete: agregarCanciones,
							},
							//Esto es lo que hara antes de leer el archivo
							before: function(file, inputElem)
							{
								console.log("Analizando archivo...", file);
							},
							//Esto es lo que hara si encuentra un error
							error: function(err, file)
							{
								console.log("ERROR:", err, file);
							},
							//Esto es lo que hara cuando termina de parsear el archivo
							complete: function()
							{
								console.log("Hecho con todos los archivos");
							}
						});
					}

				 function agregarCanciones(results) {   //results es el objeto con los datos obtenidos del CSV
					console.log(results.data)     		//Mostrando los resultados de papaparse en consola
					var datos = results.data;						//datos se convierte en un arreglo bidimensional con la información de results, donde el primer [fila] y  segundo [columna]
					var val = true
					for (i = 0; i < datos.length; i++) {
						var nombre = datos[i][0]
						var artista = datos[i][1]
						var album = datos[i][2]
						var fecha = datos[i][3]
						var imagen = datos[i][4]
						var linkSpotify = datos[i][5]
						var linkYoutube = datos[i][6]
						var objeto = {   								//objeto con estrucutra JSON
								'nombre': nombre,
								'artista': artista,
								'album': album,
								'fecha': fecha,
								'imagen': imagen,
								'linkSpotify': linkSpotify,
								'linkYoutube': linkYoutube       
						}
				console.log(objeto)
				fetch('http://localhost:3000/cancion', { 		//Método para crear nueva canción en el servidor
				method: 'POST',
				body: JSON.stringify(objeto),
				headers:{
					'Content-Type': 'application/json'
				}
				}).then(res => res.json())
				.catch(error => {
						console.error('Error:', error)
						alert("Ocurrio un error al conectar con el sevidor...")
						val = false
				})
				.then(response =>{
					console.log('Success:', response);
				}) 
				}
				if(val = true)
				{
					alert("Se agregaron las canciones exitosamente")
					cargarCanciones()
				}
			}
			</script>
			
			<!-- solicitar canciones -->
			<div class="events parallax-three pad" id="events">
				<div class="container">
					<!-- default heading -->
					<div class="default-heading-shadow">
						<!-- heading -->
						<h2>Solicitud de canciones</h2>
					</div>
							<font color="#ffffff">
							<p>Las <strong>canciones</strong> solicitadas por los usuarios son:</p>
							<!-- tabla solicitud de canciones -->
							<table class="table">
								<thead>
									<tr>
										<th scope="col">Portada</th>
										<th scope="col">Nombre canci&oacute;n</th>
										<th scope="col">Administrar</th>
									</tr>
								</thead>
								<!-- tbody para los usuarios -->
								<tbody id="listaSolicitudes">
								
								</tbody>
							</table>
						</font>
				</div>
			</div>
			<!-- solicitar canciones end -->
			
			<script>
					function cargarSolicitudes(){									//Ver canciones solicitadas
					var tablaSolicitud = document.querySelector('#listaSolicitudes')  //seleccionar el id para cuerpo de la tabla solicitudes
					fetch('http://localhost:3000/solicitudes')
					.then(response => response.json())
					.catch(error => {
						console.log("No se pudo conectar con el servidor")
					})
					.then(res => {
						tablaSolicitud.innerHTML = " "
						for (var i in res) {
							tablaSolicitud.innerHTML += 
							`<tr>
								<th>  ${res[i].nombre} </th>
								<th>  <img src="${res[i].imagen}" class="img-thumbnail" height="10%" width="10%"> </th>
								<th><button type="button" value="${res[i].id}" onclick="aceptarSolicitud(this)" class="btn btn-success">Aceptar</button> </th>
								<th><button type="button" value="${res[i].id}" onclick="eliminarSolicitud(this)" class="btn btn-danger">Rechazar</button> </th>
							</tr>`
						}
					})
				}
				
				function aceptarSolicitud(boton){
					var idCancion = boton.value
					var url = "http://localhost:3000/solicitud/" + idCancion
					fetch(url)
					.then(response => response.json())
					.catch(error => {
						console.log("No se pudo conectar con el servidor")
					})
					.then(res => {
							cargarCanciones()
							cargarSolicitudes()
							alert("Información: " + res.Descripcion)
					})
				}
				
				function eliminarSolicitud(boton){       
					var idCancion = boton.value
					var url = "http://localhost:3000/solicitud/" + idCancion
					fetch(url, {
							method: 'DELETE',
					}).then(res => res.json())
					.catch(error => {
							console.error("No se pudo conectar con el servidor")
							alert("Ocurrio un error al conectar con el servidor, revise la consola")
					})
					.then(response =>{			
							if (response.mensaje=="exito"){
								cargarCanciones()
								cargarSolicitudes()
								alert("Mensaje: " + response.Descripcion)
							}
					}) 
				}
			</script>
			
			<!-- reportes PDF -->
			<div class="about" id="reportesPDF">
				<div class="container">
					<!-- default heading -->
					<div class="default-heading">
						<!-- heading -->
						<h2>Generar reportes PDF</h2>
					</div>
					<!-- contenido de las columnas para los botones -->
					<div class="about-what-we">
						<div class="row">
							<div class="col-md-6 col-sm-4">
								<div class="what-we-item ">
									<!-- canciones -->
									<center>
										<h3><i class="fa fa-heartbeat"></i> Reporte de canciones</h3>
										<p><button onclick="cancionesReporte()" type="button" class="btn btn-success">Descargar</button></p>
									</center>
								</div>
							</div>
							<div class="col-md-6 col-sm-4">
								<div class="what-we-item ">
									<!-- usuarios -->
									<center>
										<h3><i class="fa fa-heartbeat"></i> Reporte de usuarios</h3>
										<p><button onclick="usuariosReporte()" type="button" class="btn btn-success">Descargar</button></p>
									</center>
								</div>
							</div>
							
						</div>
					</div>
				</div>
				
				<script>
						function cancionesReporte(){		
									fetch('http://localhost:3000/canciones')	
									.then(response => response.json())
									.catch(error =>{ 
											console.log("No se pudo conectar al servidor")
									})
									.then(res => {
											var usuarioNombreReporte = sessionStorage.getItem('usuario');
											var doc = new jsPDF('p', 'mm', 'legal');		//instanciar una variable de tipo jsPDF
											// título principal de la página
											doc.setFontSize(18);
											doc.setTextColor(51, 91, 255);
											doc.text(63, 15, ' Canciones registradas en el sistema ');
											//información
											doc.setFontSize(13);
											doc.setTextColor(23, 32, 42);
											doc.text(13, 23, 'Reporte generado por el usuario: " ' + usuarioNombreReporte + ' " ');
											//Datos de canciones
											doc.setFontSize(10);
											//variables para aumentar las filas dentro del documento PDF por cada iteración
											var lineaCancion = 30; 
											var lineaArtista = 35;
											var lineaAlbum = 40;   
											var lineaFecha = 45;
											var lineaImagen = 50;
											var lineaSpotify = 55;
											var lineaYoutube = 60;
											var lineaDibujo = 62;
											var simple = 0;
											for(var j in res){
													if(simple>280){
														simple = 0;					//Reinicio de variables para nueva página
														lineaCancion = 15; 
														lineaArtista = 20;
														lineaAlbum = 25;   
														lineaFecha = 30;
														lineaImagen = 35;
														lineaSpotify = 40;
														lineaYoutube = 45;
														lineaDibujo = 47;
														doc.addPage('p', 'legal');		//Agregando nueva página al PDF
														doc.text(13, lineaCancion + simple, 'canción:    ' + res[j].nombre);
														doc.text(13, lineaArtista + simple, 'Artista:    ' + res[j].artista);
														doc.text(13, lineaAlbum + simple, 'Album :   ' + res[j].album);
														doc.text(13, lineaFecha + simple, 'Fecha:    ' + res[j].fecha);
														doc.text(13, lineaImagen + simple, 'Link imagen:  '  + res[j].imagen);
														doc.text(13, lineaSpotify + simple, 'Link Spotify:  ' + res[j].linkSpotify);
														doc.text(13, lineaYoutube + simple, 'Link Youtube:  ' + res[j].linkYoutube);
														doc.line(13, lineaDibujo + simple, 200, lineaDibujo + simple);
														simple+= 40;
													}else{	
														doc.text(13, lineaCancion + simple, 'canción:    ' + res[j].nombre);
														doc.text(13, lineaArtista + simple, 'Artista:    ' + res[j].artista);
														doc.text(13, lineaAlbum + simple, 'Album:   ' + res[j].album);
														doc.text(13, lineaFecha + simple, 'Fecha:   ' + res[j].fecha);
														doc.text(13, lineaImagen + simple, 'Link imagen:  '  + res[j].imagen);
														doc.text(13, lineaSpotify + simple, 'Link Spotify:  ' + res[j].linkSpotify);
														doc.text(13, lineaYoutube + simple, 'Link Youtube:  ' + res[j].linkYoutube);
														doc.line(13, lineaDibujo + simple, 200, lineaDibujo + simple);
														simple+= 40;
													}	
											}
											// Guardar PDF
											doc.save('Reporte de canciones.pdf');	
									})	
						}
						
						function usuariosReporte(){		
									fetch('http://localhost:3000/usuariosRegistrados')	
									.then(response => response.json())
									.catch(error =>{ 
											console.log("No se pudo conectar al servidor")
									})
									.then(res => {
											var usuarioNombreReporte = sessionStorage.getItem('usuario');
											var doc = new jsPDF('p', 'mm', 'legal');		//instanciar una variable de tipo jsPDF
											// título principal de la página
											doc.setFontSize(18);
											doc.setTextColor(51, 91, 255);
											doc.text(63, 15, ' Usuarios registradas en el sistema ');
											//información
											doc.setFontSize(13);
											doc.setTextColor(23, 32, 42);
											doc.text(13, 23, 'Reporte generado por el usuario: " ' + usuarioNombreReporte + ' " ');
											//Datos de usuarios
											doc.setFontSize(10);
											doc.text(13, 30, 'Nombre');
											doc.text(63, 30, 'Apellido');
											doc.text(108, 30, 'Usuario');
											doc.text(153, 30, 'Tipo de cuenta');
											doc.line(13, 32, 200, 32);
											var simple = 37;
											for(var j in res){
													if(simple>280){
														simple = 15;					//Reinicio de variables para nueva página
														doc.text(13, simple, res[j].nombre);
														doc.text(63, simple, res[j].apellido);
														doc.text(108, simple, res[j].usuario);
														doc.text(153, simple, res[j].tipo);	
													}else{	
														doc.text(13, simple, res[j].nombre);
														doc.text(63, simple, res[j].apellido);
														doc.text(108, simple, res[j].usuario);
														doc.text(153, simple, res[j].tipo);
														simple+= 6;
													}	
											}
											// Guardar PDF
											doc.save('Reporte de usuarios.pdf');	
									})	
						}		
				</script>
							
			<!-- mapa -->
			<div class="meet parallax-four pad" id="meet">
				<div class="container">
					<!-- default heading -->
					<div class="default-heading-shadow">
						<h2>Unidos a trav&eacute;s de la m&uacute;sica</h2>
					</div>
					<!-- meet location image -->
					<div class="meet-map">
						<img class="img-responsive img-map" src="img/flat/map.png" alt="" />
						<!-- map marker for India  -->
						<a href="#" class="map-marker india " data-toggle="tooltip" data-placement="top" title="India"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
						<!-- map marker for United States  -->
						<a href="#" class="map-marker usa " data-toggle="tooltip" data-placement="top" title="United States"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
						<!-- map marker for South Africa  -->
						<a href="#" class="map-marker sa " data-toggle="tooltip" data-placement="top" title="South Africa"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
						<!-- map marker for Russia  -->
						<a href="#" class="map-marker russia " data-toggle="tooltip" data-placement="top" title="Russia"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
						<!-- map marker for Brazil  -->
						<a href="#" class="map-marker brazil " data-toggle="tooltip" data-placement="top" title="Brazil"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
					</div>
				</div>
			</div>
			<!-- mapa end -->
			
			<!-- form nuevo administrador -->
			<div class="contact pad" id="nuevoUsuario">
				<div class="container">
					<!-- default heading -->
					<div class="default-heading">
						<!-- heading -->
						<h2>Nuevo usuario</h2>
					</div>
					<!-- form administrador -->
					<div class="form-content ">	
						<p>Al usuario que se registre desde est&aacute; cuenta tambi&eacute;n ser&aacute; de tipo administrador, por lo cual tendr&aacute; los permisos de edici&oacute;n a canciones y usuarios.</p>
						<form role="form" id="contactForm" method="post">
							<div class="row">
								<div class="col-md-6 col-sm-6">
									<div class="form-group">
										<label for="name">Nombre</label>
										<input type="text" class="form-control" id="nombre" name="name" placeholder="Ingresar nombres">
									</div>
									<div class="form-group">
										<label for="lastname">Apellido</label>
										<input type="text" class="form-control" id="apellido" name="lastname" placeholder="Ingresar apellidos">
									</div>
									<div class="form-group">
										<label for="username">usuario</label>
										<input type="text" class="form-control" id="nomUsuario" name="username" placeholder="Ingresar nombre de usuario">
									</div>
								</div>
								<div class="col-md-6 col-sm-6">
										<div class="form-group">
												<div class="form-group">
														<label for="password">Password</label>
														<input type="password" class="form-control" id="contrasenia" name="password" placeholder="Ingresar contraseña">
												</div>
												<div class="form-group">
														<label for="confirmpassword">Confirmar password</label>
														<input type="password" class="form-control" id="confirmarContra" name="confirmpassword" placeholder="confirmar contraseña">
												</div>
										</div>
								</div>
							</div>
							<div class="text-center">
								<button onclick="registrarAdmin()" type="button" class="btn btn-lg btn-theme">Registrar</button>
							</div>
						</form>						
					</div>
				</div>
			</div>
			<!-- form admnistrador end -->
			
			<script>
					function registrarAdmin(){
							var nombre = document.querySelector('#nombre').value
							var apellido = document.querySelector('#apellido').value
							var nomUsuario = document.querySelector('#nomUsuario').value
							var password = document.querySelector('#contrasenia').value
							var confirmarContra = document.querySelector('#confirmarContra').value
							var tipo = "admin"
        
							if(password==confirmarContra){
								// Objeto con estructura JSON
								var objetoUsuario = { 'nombre': nombre, 'apellido': apellido, 'nomUsuario': nomUsuario, 'contra': password, 'tipo': tipo}
								var url = "http://localhost:3000/usuario"
								console.log(objetoUsuario) // ver objeto JSON en la consola del navegador
		
								fetch(url, {
									method: 'POST', 
									body: JSON.stringify(objetoUsuario), // Convertimos nuestros datos en un JSON legible para la API
									headers:{
											'Content-Type': 'application/json'   // Los headers le indica con que tipo de aplicacion trabaja la API
									}
								})
								.then(res => res.json()) 
								.catch(err => {
										console.error('Error:', err)
										alert("Ocurrio un error al conectar con el servidor, ver la consola")
								})
								.then(response =>{ console.log(response);
									if(response.mensaje == "fallo"){
											alert("Error: " + response.Descripcion)  //concatenando mensaje del JSON de la API
									}else{
											alert(response.Descripcion + ", ya puede inicar sesión")  //mensaje de entrada
											location.href="inicioAdmin.html"
									}
								})
							}else{
								alert("Las contraseñas no coinciden")
							}
        
					}  //Fin de la función registrarAdmin
		</script>
			
			<!-- footer -->
			<footer>
				<div class="container">
					<!-- social media links -->
					<div class="social">
						<a class="h-facebook" href="#"><i class="fa fa-facebook"></i></a>
						<a class="h-google" href="#"><i class="fa fa-google-plus"></i></a>
						<a class="h-linkedin" href="#"><i class="fa fa-linkedin"></i></a>
						<a class="h-twitter" href="#"><i class="fa fa-twitter"></i></a>
					</div>
					<!-- copy right -->
					<p class="copy-right">&copy; copyright 2020, All rights are reserved.</p>
				</div>
			</footer>
			<!-- footer end -->
			
			<!-- Scroll to top -->
			<span class="totop"><a href="#"><i class="fa fa-chevron-up"></i></a></span> 
		</div>
		
		<!-- Javascript files -->
		<!-- jQuery -->
		<script src="js/jquery.js"></script>
		<!-- Bootstrap JS -->
		<script src="js/bootstrap.min.js"></script>
		<!-- WayPoints JS -->
		<script src="js/waypoints.min.js"></script>
		<!-- Include js plugin -->
		<script src="js/owl.carousel.min.js"></script>
		<!-- One Page Nav -->
		<script src="js/jquery.nav.js"></script>
		<!-- Respond JS for IE8 -->
		<script src="js/respond.min.js"></script>
		<!-- HTML5 Support for IE -->
		<script src="js/html5shiv.js"></script>
		<!-- Custom JS -->
		<script src="js/custom.js"></script>
		<!-- agregando papa parse desde un cdn y JQUERY-->	
		<!--  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>   no se esta usando porque la plantilla ya tiene JQUERY dentro de sus archivos -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
		<!-- agregando enlace para jsPDF el cual fue descargado dentro de la carpeta js de la plantilla ya que no funciona con CDN-->
		<script src="js/jspdf.min.js" ></script>
		
	</body>	
</html>
